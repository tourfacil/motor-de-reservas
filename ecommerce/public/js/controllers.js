function _typeof(a){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a})(a)}var AvaliacaoStarsCtrl={star0:{},star1:{},star_selecionada_hover:0,star_selecionada:0,init:function(a){AvaliacaoStarsCtrl.onHoverStars(),AvaliacaoStarsCtrl.onClickStar()},onLoadPageStartStars:function(){AvaliacaoStarsCtrl.star_selecionada=$("#star-contador").val(),AvaliacaoStarsCtrl.desenharStarsSelecionada()},onHoverStars:function(){for(var a=function(a){$("#star".concat(a)).mouseover(function(){AvaliacaoStarsCtrl.desenharStars(a)}),$("#star".concat(a)).mouseout(function(){AvaliacaoStarsCtrl.desenharStarsSelecionada()})},o=1;o<=5;o++)a(o);star0=$("#link-star0").text(),star1=$("#link-star1").text()},clearStars:function(){for(var a=1;a<=5;a++)$("#star".concat(a)).attr("src",star0)},desenharStars:function(a){a<AvaliacaoStarsCtrl.star_selecionada_hover&&AvaliacaoStarsCtrl.clearStars(),AvaliacaoStarsCtrl.star_selecionada_hover=a;for(var o=1;o<=a;o++)$("#star".concat(o)).attr("src",star1)},desenharStarsSelecionada:function(){AvaliacaoStarsCtrl.desenharStars(AvaliacaoStarsCtrl.star_selecionada)},onClickStar:function(){for(var a=function(a){$("#star".concat(a)).click(function(){AvaliacaoStarsCtrl.star_selecionada=a,$("#star-contador").val(a)})},o=1;o<=5;o++)a(o)}},CarrinhoCtrl={_timeOut:"",_urlClear:"",init:function(a){ServicoCtrl._avisoModal=$("#comprar .info-error"),CarrinhoCtrl._urlClear=a.getAttribute("data-limpar"),CarrinhoCtrl.onClickButtonRemoveServico(),CarrinhoCtrl.onClickButtonVoltarMobile(),CarrinhoCtrl.sendStepCheckout(),CarrinhoCtrl.countDownTimer(),ServicoCtrl.onClickButtonComprar(),ServicoCtrl.onClickAddPessoa(),ServicoCtrl.onClickRemoverPessoa(),ServicoCtrl.onCloseModals(),ServicoCtrl.onClickButtonAdicionarCarrinho(),ServicoCtrl.onSubmitFormPersons(),ServicoCtrl.onSubmitFormAdditional(),ServicoCtrl.onClickBackButtonNavegador()},countDownTimer:function(){var a=$(".alert-cart time");if(a.length){clearInterval(CarrinhoCtrl._timeOut);var o=-1!==window.location.hostname.indexOf(".test")?60:20,e=new Date;e.setMinutes(e.getMinutes()+o),e=e.getTime(),CarrinhoCtrl._timeOut=setInterval(function(){var o=(new Date).getTime(),t=e-o,n=Math.floor(t%36e5/6e4),i=Math.floor(t%6e4/1e3),r="00"===(n=1===n.toString().length?"0"+n:n)?"segundos":"minutos";(i=1===i.toString().length?"0"+i:i)>0&&a.html("".concat(n,":").concat(i," ").concat(r)),t<0&&(clearInterval(CarrinhoCtrl._timeOut),CarrinhoCtrl.clearCart())},1e3)}},clearCart:function(){if(CarrinhoCtrl._urlClear.length){window.Helpers.loader.show();var a=$.post(CarrinhoCtrl._urlClear,{_method:"DELETE",_token:window.Helpers.getTokenLaravel()});a.done(function(){window.location.href=window.location.href+"?"+window.Helpers.addURLParameter("expirado","true")}),a.fail(window.Helpers.loader.hide)}},onClickButtonVoltarMobile:function(){$("button[data-action='voltar']").on("click",function(){return window.history.back()})},onClickButtonRemoveServico:function(){$("[data-action='remove']").on("click",function(a){a.preventDefault(),window.Helpers.loader.show();var o=$(a.currentTarget),e=window.carrinho[o.attr("data-index")]||[];window.Google.sendRemoveFromCart(e),$.post(o.attr("data-remove"),{_method:"DELETE",_token:window.Helpers.getTokenLaravel()}).done(function(){window.location.reload()})})},sendStepCheckout:function(){var a=window.carrinho.length,o=0,e=[];window.Google.sendStepCheckout(window.carrinho,1);for(var t=0;t<a;t++){var n=window.carrinho[t];o+=parseFloat(n.price),e.push({id:n.id,quantity:1})}window.Facebook.sendStepCheckout(e,o)}},CategoriaCtrl={init:function(){CategoriaCtrl.onChangeSelectOrdenacao(),CategoriaCtrl.onClickButtonOpenFilters()},onChangeSelectOrdenacao:function(){$("select#listing").on("change",function(a){var o=$(a.currentTarget);window.location.href=o.val()})},onClickButtonOpenFilters:function(){$("button[data-action='filtros']").on("click",function(a){a.preventDefault();var o=$("#filtros");o.hasClass("d-none")&&(o.css("display","none"),o.removeClass("d-none")),o.slideToggle()})}},DestinoCtrl={init:function(){DestinoCtrl.sliderBanners(),DestinoCtrl.sliderServicos()},sliderBanners:function(){$(".banner-slider").owlCarousel({loop:!1,rewind:!0,lazyLoad:!0,margin:0,nav:!0,navText:['<span class="iconify" data-icon="icons8:angle-left" data-inline="false"></span>','<span class="iconify" data-icon="icons8:angle-right" data-inline="false"></span>'],items:1,dots:!0,responsive:{0:{items:1,nav:!1},848:{nav:!0}}})},sliderServicos:function(){$(".owl-servicos").owlCarousel(window.App.sliderConfig.withButtons)}},HomeCtrl={_urlDestino:"",init:function(a){HomeCtrl._urlDestino=a.getAttribute("data-destino"),HomeCtrl.owlDestinos(),HomeCtrl.owlBackgroundDestinos(),HomeCtrl.owlServicos(),HomeCtrl.onClickChangeDestino(),window.Helpers.loadFileJs("/js/instafeed.min.js?v=1.3.2",HomeCtrl.onLoadInstaFeed)},owlBackgroundDestinos:function(){$(".owl-destinos-bg").owlCarousel({animateOut:"fadeOut",autoWidth:!1,dots:!1,mouseDrag:!1,loop:!0,lazyLoad:!0,margin:0,nav:!1,items:1,autoplay:!0})},owlDestinos:function(){$(".owl-destinos").owlCarousel(window.App.sliderConfig.withButtons)},owlServicos:function(){$(".owl-servicos").owlCarousel(window.App.sliderConfig.withButtons)},onClickChangeDestino:function(){var a=$("#destino-content"),o=$("#destino-replace");$("button[data-action='trocarDestino']").on("click",function(e){e.preventDefault();var t=$(e.currentTarget);if($("html").animate({scrollTop:a.position().top-10},500),!t.hasClass("active")){o.animate({opacity:0},350);var n=$.get(HomeCtrl._urlDestino+"/"+t.attr("data-destino"));n.done(function(e){a.find("button[data-action='trocarDestino'].active").removeClass("active"),t.addClass("active"),$(".owl-servicos").trigger("destroy.owl.carousel"),o.html(e),o.animate({opacity:1},350),HomeCtrl.owlServicos()}),n.catch(function(){o.animate({opacity:1},350),alert("Não foi possível alterar o destino, tente novamente!")})}})}},LoginCtrl={init:function(){window.Helpers.capitalizeInput()}},MeusDadosCtrl={init:function(){window.Helpers.capitalizeInput(),window.Helpers.vanillaMask()}},NavbarCtrl={init:function(){NavbarCtrl.onClickLinkLogout()},onClickLinkLogout:function(){$("a[data-action='logout']").on("click",function(a){a.preventDefault();var o=$(a.currentTarget);window.Helpers.loader.show(),$.post(o.attr("href"),{_token:window.Helpers.getTokenLaravel()}).done(function(){window.location.reload()})})}},NewsletterCtrl={init:function(){NewsletterCtrl.onSubmitFormNewsletter()},onSubmitFormNewsletter:function(){var a=$("form[name='newsletter']"),o=a.find(".spinner-border"),e=a.find("#result-newsletter");a.on("submit",function(a){a.preventDefault();var t=$(a.currentTarget);o.removeClass("d-none");var n=$.post(t.attr("action"),t.serialize());n.done(function(a){o.addClass("d-none"),e.removeClass("d-none"),e.text("Seu e-mail foi cadastrado para receber as novidades!"),t.find("input#newsletter_input").val("")}),n.catch(function(){o.addClass("d-none"),e.removeClass("d-none"),e.text("Não foi possível cadastrar seu email!")})})}},PagamentoCtrl={_urlVerificarEmailCliente:"",_resize:null,init:function(a){PagamentoCtrl._urlVerificarEmailCliente=a.getAttribute("data-cliente"),PagamentoCtrl._urlGeracaoQrcodePagamentoPix=a.getAttribute("data-geracao-pix"),PagamentoCtrl._urlConsultaPagamentoPix=a.getAttribute("data-consultar-pix"),PagamentoCtrl._urlGerarPedido=a.getAttribute("data-gerar-pedido"),PagamentoCtrl._urlPedidoSucesso=a.getAttribute("data-pagamento-sucesso"),PagamentoCtrl._urlCancelarPix=a.getAttribute("data-cancelar-pix"),PagamentoCtrl._urlClienteSessao=a.getAttribute("data-pagamento-cliente-sessao"),window.Helpers.vanillaMask(),window.Helpers.capitalizeInput(),PagamentoCtrl.onResizeWindow(),PagamentoCtrl.onChangeSelectParcelas(),CarrinhoCtrl.onClickButtonVoltarMobile(),PagamentoCtrl.onChangeInputCreditCard(),PagamentoCtrl.onBlurInputEmailCliente(),PagamentoCtrl.sendStepCheckout(),PagamentoCtrl.onLoadPage(),PagamentoCtrl.onChangeSelectFormaPagamento(),PagamentoCtrl.onClickCopyPix(),PagamentoCtrl.onClickChangeFormaPagamento(),PagamentoCtrl.onChangeCamposCliente(),PagamentoCtrl.onChangeCamposCartao()},onChangeSelectParcelas:function(){$("select#numero_parcelas").on("change",function(a){var o=$(a.currentTarget).find("option:selected"),e=$("button.btn-pay"),t=o.val(),n=window.Helpers.formataValor(o.attr("data-valor"),2);e.text("Pagar em ".concat(t,"x de R$ ").concat(n))})},onChangeInputCreditCard:function(){var a=$("input[data-mask='cartao']");a.on("keyup",function(a){var o=$(a.currentTarget),e=o.val().replace(/[^0-9]/g,""),t=$(o.attr("data-logo"));if(t.removeClass(Object.keys(window.creditCardsBrand).map(function(a){return window.creditCardsBrand[a]}).join(" ")),e.length>0){var n=window.creditCardType(e);void 0!==n[0]&&t.addClass(n[0].type.toLowerCase())}}),a.on("blur",function(a){a.preventDefault();var o=$(a.currentTarget),e=o.val().trim().replace(/[^0-9]/g,""),t=$(o.attr("data-callback")),n=$(o.attr("data-logo")),i="",r=o.siblings(".invalid-feedback");if(0!==e.length){var c=window.Helpers.isValidCreditCartNumber(e);if(n.removeClass(Object.keys(window.creditCardsBrand).map(function(a){return window.creditCardsBrand[a]}).join(" ")),c.valid)i=c.brand.toLowerCase(),n.addClass(i),t.val(i),r.html("");else{var l=window.creditCardType(e);void 0!==l[0]&&"american-express"===l[0].type.toLowerCase()?(n.addClass("american-express"),t.val("amex"),i="amex",r.html("")):(t.val(""),o.addClass("is-invalid"),r.html("Número do cartão inválido, verifique!"))}var d="amex"===i?4:3,s="".concat(d," Dígitos");$("[data-mask='cvv']").attr("maxlength",d).attr("data-min",d).attr("placeholder",s)}})},onBlurInputEmailCliente:function(){$("input[name='cliente[email]']").on("blur",function(a){a.preventDefault();var o=$(a.currentTarget),e=o.val().trim(),t=o.siblings(".invalid-feedback"),n=o.siblings(".loader-input");if(!o.hasClass("is-invalid")&&e.length>0){if(!1===window.Helpers.isMail(e))return o.addClass("is-invalid"),t.html("E-mail inválido. Verifique!"),!1;n.removeClass("d-none"),$.post(PagamentoCtrl._urlVerificarEmailCliente,{email:e,_token:window.Helpers.getTokenLaravel()}).done(function(a){if(n.addClass("d-none"),a.email_exists){o.addClass("is-invalid"),t.html("E-mail já utilizado! Por favor faça login."),$("input#email_login").val(e);var i=$("#modal-aviso-login");i.find("h6").html("Este e-mail já está em uso"),i.find("p").html("Olá este e-mail já possui uma conta ativa! <br> Por favor faça login."),i.jqmodal("show")}})}})},onResizeWindow:function(){var a=$("input#codigo_cartao_mobile"),o=$("input#codigo_cartao"),e=function(){$(window).width()>=768?(a.attr("disabled",!0),a.removeAttr("data-checkout"),o.removeAttr("disabled"),o.attr("data-checkout","securityCode")):(o.attr("disabled",!0),o.removeAttr("data-checkout"),a.removeAttr("disabled"),a.attr("data-checkout","securityCode"))};e(),$(window).resize(function(){clearTimeout(PagamentoCtrl._resize),PagamentoCtrl._resize=setTimeout(e,100)})},updateSecutiryCodeType:function(){var a=$("input#codigo_cartao_mobile"),o=$("input#codigo_cartao");$(window).width()>=768?(a.attr("disabled",!0),a.removeAttr("data-checkout"),o.removeAttr("disabled"),o.attr("data-checkout","securityCode")):(o.attr("disabled",!0),o.removeAttr("data-checkout"),a.removeAttr("disabled"),a.attr("data-checkout","securityCode"))},sendStepCheckout:function(){var a=window.carrinho.length,o=0,e=[];window.Google.sendStepCheckout(window.carrinho,2);for(var t=0;t<a;t++){var n=window.carrinho[t];o+=parseFloat(n.price),e.push({id:n.id,quantity:1})}window.Facebook.sendAddPaymentInfo(e,o)},onLoadPage:function(){$("select#forma_pagamento").val("")},requestPedidoRealizado:function(){$.post(PagamentoCtrl._urlPedidoSucesso,{_token:window.Helpers.getTokenLaravel()}).done(function(a){console.log(a)})},requestGerarPedido:function(){Helpers.loader.show();var a={nome:$("input#nome_cadastro").val(),email:$("input#email").val(),cpf:$("input#cpf_cadastro").val(),nascimento:$("input#nascimento_cadastro").val(),telefone:$("input#tel_cadastro").val()},o=PagamentoCtrl._urlGerarPedido,e={cliente:a};axios.post(o,e).then(function(a){var o=a.data;window.location.href=o.url_redirecionamento})},onChangeSelectFormaPagamento:function(){$("select#forma_pagamento").on("change",function(a){$this=$(a.currentTarget);var o=$this.find("option:selected");"pix"==o.val()&&($("#btn_gerar_codigo_pix").css("display","block"),$("#cartao_credito").hide(),$("#numero_cartao").prop("disabled",!0),$("#nome_cartao").prop("disabled",!0),$("#codigo_cartao").prop("disabled",!0),$("#codigo_cartao_mobile").prop("disabled",!0),$("#metodo_pagamento_cartao").val("PIX"),$("select#forma_pagamento").addClass("desconto-pix")),"cartao_credito"==o.val()&&($("#btn_gerar_codigo_pix").css("display","none"),$("#cartao_credito").show(),$("#pix").hide(),$("#alterar_forma_pagamento").hide(),$("#numero_cartao").prop("disabled",!1),$("#nome_cartao").prop("disabled",!1),PagamentoCtrl.updateSecutiryCodeType(),$("#metodo_pagamento_cartao").val("CREDITO"),$("select#forma_pagamento").removeClass("desconto-pix")),""==o.val()&&($("#pix").hide(),$("#cartao_credito").hide(),$("#alterar_forma_pagamento").hide())})},isCamposValidosParaPix:function(){var a=!0;return $("input#email").val()||($("input#email").siblings(".invalid-feedback").html("O campo Nome Completo não pode ser vazio!"),$("input#email").addClass("is-invalid"),a=!1),$("input#nome_cadastro").val()||($("input#nome_cadastro").siblings(".invalid-feedback").html("O campo Nome Completo não pode ser vazio!"),$("input#nome_cadastro").addClass("is-invalid"),a=!1),$("input#cpf_cadastro").val()||($("input#cpf_cadastro").siblings(".invalid-feedback").html("O campo CPF não pode ser vazio!"),$("input#cpf_cadastro").addClass("is-invalid"),a=!1),$("input#nascimento_cadastro").val()||($("input#nascimento_cadastro").siblings(".invalid-feedback").html("O campo Data de nascimento não pode ser vazio!"),$("input#nascimento_cadastro").addClass("is-invalid"),a=!1),$("input#tel_cadastro").val()||($("input#tel_cadastro").siblings(".invalid-feedback").html("O campo Telefone não pode ser vazio!"),$("input#tel_cadastro").addClass("is-invalid"),a=!1),0!=a},onClickCopyPix:function(){$("#copiaCodigoPix").on("click",function(a){var o=document.getElementById("codigo_pix").innerText;return click_copy(o),swal("Código PIX copiado","O código pix foi copiado para a área de transferência.","success")})},onClickChangeFormaPagamento:function(){$("#alterar_forma_pagamento").on("click",function(a){Helpers.loader.show();var o=PagamentoCtrl._urlCancelarPix;axios.post(o,{}).then(function(){window.location.reload()})})},onChangeCamposCliente:function(){var a=function(){var a={nome:$("#nome_cadastro").val(),cpf:$("#cpf_cadastro").val(),nascimento:$("#nascimento_cadastro").val(),telefone:$("#tel_cadastro").val(),email:$("#email").val(),rua:$("#rua_cadastro").val(),numero:$("#numero_cadastro").val(),bairro:$("#bairro_cadastro").val(),cidade:$("#cidade_cadastro").val(),estado:$("#estado_cadastro").val(),cep:$("#cep_cadastro").val()},o=PagamentoCtrl._urlClienteSessao;axios.post(o,a).then(function(a){a.data})};$("#nome_cadastro").on("change",function(o){a()}),$("#cpf_cadastro").on("change",function(o){a()}),$("#nascimento_cadastro").on("change",function(o){a()}),$("#tel_cadastro").on("change",function(o){a()}),$("#email").on("change",function(o){a()}),$("#rua_cadastro").on("change",function(o){a()}),$("#numero_cadastro").on("change",function(o){a()}),$("#bairro_cadastro").on("change",function(o){a()}),$("#cidade_cadastro").on("change",function(o){a()}),$("#estado_cadastro").on("change",function(o){a()}),$("#cep_cadastro").on("change",function(o){a()})},onChangeCamposCartao:function(){var a=[$("#numero_cartao"),$("#nome_cartao"),$("#codigo_cartao"),$("#codigo_cartao_mobile")];for(var o in a){a[o].on("keypress",function(a){PagamentoCtrl.liberarSelectParcelas()})}},liberarSelectParcelas:function(){var a=$("#numero_cartao"),o=$("#nome_cartao"),e=$("#codigo_cartao"),t=$("#codigo_cartao_mobile"),n=$("#numero_parcelas");if(o.val().length<2)return!1;if(a.val().length<16)return!1;if(""!=a.siblings(".invalid-feedback").html())return!1;if(e.prop("disabled")){if(t.val().length<1)return!1}else if(e.val().length<1)return!1;return n.prop("disabled",!1),!0}},PagamentoPixCtrl={link_pesquisa:"",init:function(){PagamentoPixCtrl.link_pesquisa=$("#link-pesquisa").attr("data"),PagamentoPixCtrl.onClickCopyPix(),PagamentoPixCtrl.consultarStatusPix()},onClickCopyPix:function(){$("#copiaCodigoPix").on("click",function(a){var o=document.getElementById("codigo_pix").innerText;return click_copy(o),swal("Código PIX copiado","O código pix foi copiado para a área de transferência.","success")})},consultarStatusPix:function(){setTimeout(function(){var a=PagamentoPixCtrl.link_pesquisa;axios.post(a,{}).then(function(a){a.data.status?(window.Helpers.loader.show(),window.location.reload()):PagamentoPixCtrl.consultarStatusPix()}).catch(function(a){window.location.reload()})},3e3)}},PedidoCtrl={finalizacao:{data:[],acompanhantes:[],campos_adicionais_lista:[]},init:function(){PedidoCtrl.onClickButtonPrintVoucher(),Helpers.loadSweetAlert(),PedidoCtrl.onClickBotaoFinalizar(),PedidoCtrl.onClickBotaoFinalizarAcomps(),PedidoCtrl.onClickBotaoFinalizarCampos(),PedidoCtrl.onClickBotaoAvaliarServico(),PedidoCtrl.onFormSubmitAvaliacao(),window.DadosFactory.loadAcompanhantes(),AvaliacaoStarsCtrl.onHoverStars(),AvaliacaoStarsCtrl.onClickStar()},onClickButtonPrintVoucher:function(){$("button[data-action='print_voucher']").on("click",function(a){a.preventDefault();var o=$(a.currentTarget);window.open(o.attr("data-url"),"_blank")})},scrollToServico:function(){window.location.href.indexOf("#imprimir")>0&&$(window).scrollTop($("#servicos-adquiridos").offset().top-50)},onClickBotaoFinalizar:function(){$(".finalizar-reserva-botao").on("click",function(a){PedidoCtrl.modalAcomps(a)})},onClickBotaoFinalizarAcomps:function(){$("#salvar-acompanhantes").on("click",function(a){PedidoCtrl.salvarAcomps()})},onClickBotaoFinalizarCampos:function(){$("#salvar-campos").on("click",function(a){PedidoCtrl.salvarCampos()})},onClickBotaoAvaliarServico:function(){$("#avaliar-servico").on("click",function(a){PedidoCtrl.modalAvaliacaoServico()})},modalAvaliacaoServico:function(){var a=event.currentTarget.getAttribute("reserva_id"),o=event.currentTarget.getAttribute("url_post"),e=$("#modal-avaliacao"),t=$("#form-avaliacao"),n=$("#avaliacao_reserva_id");t.attr("action",o),n.val(a),e.jqmodal()},onFormSubmitAvaliacao:function(){$("#form-avaliacao").submit(function(a){var o=$("#star-contador").val(),e=$("#avaliacao").val();if(0==PedidoCtrl.validarFormAvaliacao(o,e))return a.preventDefault(),swal({title:"Preencha todos os campos",text:"Selecione a nota e preencha a avaliação com pelo menos 5 caracteres.",icon:"warning"})})},validarFormAvaliacao:function(a,o){return""!=a&&!(o.length<=4)},modalAcomps:function(a){var o=a.currentTarget.getAttribute("id_reserva"),e=$("#link-finalizacao").text(),t="".concat(e,"?reserva_id=").concat(o);axios.get(t).then(function(a){var o=a.data;PedidoCtrl.finalizacao.data=o,PedidoCtrl.abrirModalAcomps(o.quantidades)})},abrirModalAcomps:function(a){if("SOLICITA_INFO_CLIENTES"==PedidoCtrl.finalizacao.data.servico.info_clientes){for(var o=$("#modal-acompanhantes"),e=0,t="",n=0;n<a.length;n++)for(var i=a[n],r=0;r<i.quantidade;r++)t+='\n                        <div class="list-acompanhantes mb-2">\n                            <h6 class="font-weight-medium h5" style="font-weight: bold;">'.concat(e+1,"° Acompanhante - ").concat(i.variacao_servico.nome,'</h6>\n                            <div class="row">\n                                <div class="form-group nome_acompanhante col-sm-12 col-lg-4">\n                                    <label for="nome_').concat(n,'" style="color:#2c304d;">Nome completo*</label>\n                                    <input type="text" class="form-control" id="nome_').concat(e,'" name="acompanhantes[').concat(e,'][nome]" data-auto-capitalize data-nome-completo="true" required data-min="5" data-required placeholder="Nome e sobrenome" autocomplete="off" title="Nome completo" data-list="nomes_acom" data-callback="nome">\n                                    <div class="invalid-feedback"></div>\n                                </div>\n                                <div class="form-group doc_acompanhante col-sm-12 col-md-6 col-lg-4">\n                                    <label for="documento_').concat(n,'" style="color:#2c304d;">N° do documento*</label>\n                                    <input type="text" class="form-control" id="documento_').concat(e,'" name="acompanhantes[').concat(e,'][documento]" required data-min="5" data-required placeholder="Número CPF ou RG" title="Documento" autocomplete="off" data-list="doc_acom" data-callback="documento">\n                                    <div class="invalid-feedback"></div>\n                                </div>\n                                <div class="form-group nasc_acompanhante col-sm-12 col-md-6 col-lg-4">\n                                    <label for="nascimento_').concat(n,'" style="color:#2c304d;">Nascimento*</label>\n                                    <input type="tel" class="form-control vanillaMask" id="nascimento_').concat(e,'" name="acompanhantes[').concat(e,'][nascimento]" required data-min="9" data-required placeholder="DD/MM/AAAA" data-mask="date" title="Nascimento" autocomplete="off" maxlength="10" autocomplete="off" data-list="data_acom" data-callback="nascimento">\n                                    <div class="invalid-feedback"></div>\n                                    <input type="hidden" id="variacao_').concat(e,'" name="acompanhantes[').concat(e,'][variacao_servico_id]" value="').concat(i.variacao_servico_id,'">\n                                    <input type="hidden" id="reserva_').concat(e,'" name="acompanhantes[').concat(e,'][reserva_pedido_id]" value="').concat(i.reserva_pedido_id,'">\n                                </div>\n                            </div>\n                        </div>\n                    '),e++,o.find(".fields-input").html(t),Helpers.vanillaMask();o.jqmodal()}else PedidoCtrl.changeAcompToCampoToFinish()},salvarAcomps:function(){for(var a=PedidoCtrl.finalizacao.data.quantidades,o=[],e=0,t=0;t<a.length;t++)for(var n=a[t],i=0;i<n.quantidade;i++){var r={};if(r.nome=$("#nome_".concat(e)).val(),0==PedidoCtrl.isNomeOuDocumentoAcompValido(r.nome))return PedidoCtrl.alerta("Nome inválido","O nome do acompanhante ".concat(e+1," deve conter pelo menos 5 caracteres."));if(r.documento=$("#documento_".concat(e)).val(),0==PedidoCtrl.isNomeOuDocumentoAcompValido(r.documento))return PedidoCtrl.alerta("Documento inválido","O documento do acompanhante ".concat(e+1," deve conter pelo menos 5 caracteres."));if(r.nascimento=$("#nascimento_".concat(e)).val(),0==PedidoCtrl.isNascimentoAcompValido(r.nascimento))return PedidoCtrl.alerta("Data de nascimento inválida","A data de nascimento do acompanhante ".concat(e+1," deve ser válida."));r.variacao_servico_id=$("#variacao_".concat(e)).val(),r.reserva_pedido_id=$("#reserva_".concat(e)).val(),o.push(r),e++}PedidoCtrl.finalizacao.acompanhantes=o,window.DadosFactory.saveDadosAcompanhantes(o),PedidoCtrl.changeAcompToCampoToFinish()},changeAcompToCampoToFinish:function(){PedidoCtrl.finalizacao.data.servico.campos_adicionais_ativos.length>0?PedidoCtrl.abrirModalCampo():PedidoCtrl.submeterInformacoes()},abrirModalCampo:function(){for(var a=PedidoCtrl.finalizacao.data.servico.campos_adicionais_ativos,o=$("#modal-campo-adicional"),e="",t=0;t<a.length;t++){var n=a[t],i=0===t?"col-sm-12":"col-sm-12 col-md-6",r="",c="";"SIM"===n.obrigatorio&&(r="data-required required",c="*"),e+='<div class="form-group '.concat(i,'">\n                        <label for="adicional_').concat(n.id,'" style="color:#2c304d;">').concat(n.campo).concat(c,'</label>\n                        <input type="text" class="form-control campos" numero="').concat(t,'" id="adicional_').concat(n.id,'" name="adicionais[').concat(t,'][informacao]" data-min="1" ').concat(r,' placeholder="').concat(n.placeholder,'" title="').concat(n.campo,'">\n                        <span class="invalid-feedback"></span>\n                        <input type="hidden" id="ad-').concat(t,'" name="adicionais[').concat(t,'][campo_adicional_servico_id]" value="').concat(n.id,'">\n                        <input type="hidden" id="adr-').concat(t,'" name="adicionais[').concat(t,'][campo_adicional_servico_id]" value="').concat(PedidoCtrl.finalizacao.data.reserva.id,'">\n                    </div>'),o.find(".fields-input").html(e),o.jqmodal()}},salvarCampos:function(){for(var a=$(".campos"),o=[],e=0;e<a.length;e++){var t={},n=a.eq(e),i=$("#ad-".concat(n.attr("numero"))),r=$("#adr-".concat(n.attr("numero")));if(t.informacao=n.val(),0==PedidoCtrl.isCampoAdicionalValido(t.informacao))return PedidoCtrl.alerta("Campo adicional inválido","O(s) campo(s) adicionais devem conter pelo menos 4 caracteres.");t.campo_adicional_servico_id=i.val(),t.reserva_pedido_id=r.val(),o.push(t),PedidoCtrl.finalizacao.campos_adicionais_lista=o}PedidoCtrl.submeterInformacoes()},submeterInformacoes:function(){Helpers.loader.show();var a={acompanhantes:PedidoCtrl.finalizacao.acompanhantes,campos_adicionais:PedidoCtrl.finalizacao.campos_adicionais_lista},o=$("#link-finalizacao-store").text();axios.post(o,a).then(function(a){window.location.reload()})},isNomeOuDocumentoAcompValido:function(a){return a.length>4},isNascimentoAcompValido:function(a){return!(10!=a.length||!Helpers.isValidDate(a))},isCampoAdicionalValido:function(a){return a.length>3},alerta:function(a,o){swal(a,o,"warning")}},ResultadoPagamentoCtrl={init:function(){ResultadoPagamentoCtrl.sendPurchase()},sendPurchase:function(){"true"===window.send_purchase&&(null==window.pedido.total||null==window.pedido.gtm?window.Google.sendPurchaseGtm(window.pedido.codigo,window.pedido.valor_total,window.pedido.reservas,window.pedido.cliente_email):window.Google.sendPurchaseGtm(window.pedido.codigo,window.pedido.total,window.pedido.gtm,window.pedido.cliente_email),null==window.pedido.total||null==window.pedido.fcb?(window.Facebook.sendPurchase(window.pedido.reservas,window.pedido.valor_total),console.log(window.pedido.reservas),console.log(window.pedido.valor_total)):window.Facebook.sendPurchase(window.pedido.fcb,window.pedido.total))}},SearchBox={$body:"",$box:"",$btnClose:"",_status:!1,init:function(){SearchBox.$body=$("body"),SearchBox.$box=$(".search-box"),SearchBox.$box&&(SearchBox.$btnClose=SearchBox.$box.find("[data-action='close-search']"),SearchBox.bindOnClickOpen(),SearchBox.bindOnClickClose()),SearchBox.onSearchInput()},bindOnClickOpen:function(){$("[data-action='open-search-box']").on("click",function(a){a.preventDefault(),SearchBox.open()})},bindOnClickClose:function(){SearchBox.$btnClose.on("click",function(a){a.preventDefault(),SearchBox.close()}),$(document).on("keydown",function(a){27===a.which&&SearchBox._status&&SearchBox.close()})},open:function(){if(!SearchBox._status){SearchBox.$box.fadeIn(),SearchBox._status=!0;var a=window.innerWidth-$(document).width();SearchBox.$body.css("padding-right","".concat(a,"px")),SearchBox.$body.css("overflow","hidden"),SearchBox.$box.find("input").focus()}},close:function(){SearchBox._status&&(SearchBox.$box.fadeOut(),SearchBox._status=!1,setTimeout(function(){SearchBox.$body.css("padding-right",""),SearchBox.$body.css("overflow","")},200))},onSearchInput:function(){var a=$("#autocomplete-list"),o=$("input[data-action='search']"),e=window.location.protocol+"//"+window.location.host+"/";o.on("keyup",window.Helpers.debounce(function(){var t=o.val().trim(),n="";if(t.length>0){var i=(t=window.Helpers.removeAcentos(t).toLowerCase()).length;$.getJSON("".concat(o.attr("data-route"),"?q=").concat(t)).done(function(o){var r=o,c=r.length;if(c){for(var l=0;l<c;l++){var d=r[l],s=void 0,v=window.Helpers.removeAcentos(d.nome).toLowerCase().indexOf(t),m=v+i;s=v<0?d.nome:"".concat(d.nome.substring(0,v),"<b>").concat(d.nome.substring(v,m),"</b>").concat(d.nome.substring(m,d.nome.length)),n+='\n                                    <div class="autocomplete-items">\n                                        <a href="'.concat(e+d.url,'" title="').concat(d.nome,'">\n                                            <img src="').concat(d.image,'" alt="').concat(d.nome,'"> ').concat(s,' <br>\n                                            <span class="small">').concat(d.cidade," - R$ ").concat(d.valor_venda,"</span>\n                                        </a>\n                                    </div>")}a.html(n),a.show()}else a.html('<div class="autocomplete-items no-results">Nenhum resultado encontrado para <strong>'.concat(t,"</strong>...</div>")),a.show()})}else a.hide()},150)),o.focus(function(o){$(o.currentTarget).val().trim().length>0&&a.show()}).blur(function(){setTimeout(function(){a.hide()},150)})}},ServicoCtrl={_dadosServico:{},_response:[],_events:[],_payload:[],_agenda:[],_avisoModal:{},_sendToCart:!1,init:function(a){ServicoCtrl._avisoModal=$("#comprar .info-error"),ServicoCtrl.loadInfoServico(a),ServicoCtrl.setupGallerySlider(),ServicoCtrl.setupSliderRelacionados(),ServicoCtrl.onClickButtonComprar(),ServicoCtrl.onClickAddPessoa(),ServicoCtrl.onClickRemoverPessoa(),ServicoCtrl.onCloseModals(),ServicoCtrl.onClickButtonAdicionarCarrinho(),ServicoCtrl.onSubmitFormPersons(),ServicoCtrl.onSubmitFormAdditional(),ServicoCtrl.onClickBackButtonNavegador(),ServicoCtrl.setupWrapper(),ServicoCtrl.onClickButtonMostrarMais(),ServicoCtrl.onClickButtonOpenGallery(),ServicoCtrl.verMaisAvaliacao(),ServicoCtrl.verMenosAvaliacao(),ServicoCtrl.carregarMaisAvaliacoes()},onClickButtonOpenGallery:function(){$('button[data-action="openGallery"]').on("click",function(a){a.preventDefault(),$(".owl-gallery a:first").click()})},setupWrapper:function(){for(var a=$(".service-details .atendimento + ul"),o=a.length,e=0;e<o;e++)for(var t=$(a[e]).find("li"),n=t.length,i=0;i<n;i++){var r=$(t[i]),c=r.text().split("|");if(void 0!==c[1]){var l=c[1].trim(),d="fechado"===l.toLowerCase()?"text-closed":"text-hour",s="".concat(c[0].trim(),' <span class="').concat(d,'">').concat(l,"</span>");r.html(s)}}for(var v=$(".service-details .ler-mais"),m=v.length,p=["P","UL"],u=0;u<m;u++){for(var C=$(v[u]),_=C,f=_.next(),h=f.get(0).tagName,g=parseInt(window.Helpers.getRandomArbitrary(5,50)),S=$("<div id='read_".concat(g,"' class='readmore'/>"));-1!==jQuery.inArray(h,p);)_=f,f=f.next(),h=_.get(0).tagName,-1!==jQuery.inArray(h,p)&&S.append(_.remove());if(C.after(S),S.height()>=parseInt(S.css("max-height"))){S.addClass("has-overlay");var w=$('<button data-expand="read_'.concat(g,'" title="Mostrar mais" class=\'btn btn-link btn-readme\'>Mostrar mais +</button>'));S.after(w)}}},onClickButtonMostrarMais:function(){$(document).on("click","button[data-expand].btn-readme",function(a){var o=$(a.currentTarget),e=$("#".concat(o.attr("data-expand"))),t=window.pageYOffset;void 0!==e&&(e.hasClass("readmore")?(e.removeClass("readmore"),o.html("Mostrar menos").attr("title","Mostrar menos")):(e.addClass("readmore"),o.html("Mostrar mais +").attr("title","Mostrar mais")),window.scroll(0,t))})},loaderDatas:{show:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Carregando datas...",o=arguments.length>1&&void 0!==arguments[1]&&arguments[1],e=$("#loader-datas"),t=e.find(".spinner-border"),n=e.find(".iconify.text-danger");o?(n.removeClass("d-none"),t.addClass("d-none")):(n.addClass("d-none"),t.removeClass("d-none")),e.find("p").html(a),e.jqmodal({showClose:o})}},setupGallerySlider:function(){$(".owl-gallery").owlCarousel({loop:!1,lazyLoad:!0,margin:0,dots:!1,nav:!0,rewind:!0,responsiveClass:!0,lazyLoadEager:2,navText:['<i class="iconify" data-icon="jam:chevron-left"></i>','<i class="iconify" data-icon="jam:chevron-right"></i>'],responsive:{0:{items:1},600:{items:2},848:{items:3},1000:{items:3}}})},setupSliderRelacionados:function(){$(".owl-relacionados").owlCarousel(window.App.sliderConfig.withButtons)},loadInfoServico:function(a){$.getJSON(a.getAttribute("data-servico")).done(function(a){ServicoCtrl._dadosServico=a,ServicoCtrl.readActionInUrl(),ServicoCtrl.sendViewProduct()})},readActionInUrl:function(){var a=window.Helpers.getURLParameter("alterar");"quantidade"!==a&&"data"!==a||$("[data-action='comprar']").trigger("click")},sendViewProduct:function(){window.Facebook.sendViewContent(ServicoCtrl._dadosServico.uuid,ServicoCtrl._dadosServico.valor_venda),window.Google.sendProductDetails({id:ServicoCtrl._dadosServico.uuid,name:ServicoCtrl._dadosServico.nome,price:ServicoCtrl._dadosServico.valor_venda,category:"".concat(ServicoCtrl._dadosServico.categoria.nome," / ").concat(ServicoCtrl._dadosServico.destino.nome),google_business_vertical:"custom"})},onClickBackButtonNavegador:function(){window.addEventListener("popstate",function(){var a=$.jqmodal.getCurrent();null!==a&&a.close()})},onCloseModals:function(){$("#modal-acompanhantes").on($.jqmodal.CLOSE,function(){ServicoCtrl._sendToCart||ServicoCtrl.openModalComprar()}),$("#modal-campo-adicional").on($.jqmodal.CLOSE,function(){ServicoCtrl._sendToCart||(ServicoCtrl._response.necessita_identificacao?ServicoCtrl.openModalAcompanhantes(!1):ServicoCtrl.openModalComprar())}),$("#comprar").on($.jqmodal.CLOSE,function(){$("#whatsapp").show()})},openModalComprar:function(){$("#comprar").jqmodal(),ServicoCtrl.pushStateModal("datas")},pushStateModal:function(a){var o=window.location.href.replace("#datas","").replace("#acompanhantes","").replace("#adicionais","");history.pushState(null,null,o+"#"+a)},onClickButtonComprar:function(){$("[data-action='comprar'], [data-action='edit-servico']").on("click",function(a){a.preventDefault(),$("#whatsapp").hide();var o=$(a.currentTarget),e=$("#comprar"),t=null;ServicoCtrl.loaderDatas.show(),ServicoCtrl._sendToCart=!1;var n="edit-servico"===o.attr("data-action")?o.attr("data-route")+"?carrinho=true":ServicoCtrl._dadosServico.urls.calendario,i=$.getJSON(n);i.done(function(a){if(a.events.length>0){var n=$("#calendar-container");n.html(""),ServicoCtrl._response=a,ServicoCtrl._agenda=$.extend(!0,{},a.disponibilidade),ServicoCtrl.prepareDatesForCalendar(a.events),a.necessita_identificacao&&window.DadosFactory.loadAcompanhantes();var i=ServicoCtrl._events[0],r=$.extend(!0,{},a.disponibilidade[0]),c=i.date;"edit-servico"===o.attr("data-action")&&(ServicoCtrl._dadosServico=$.extend(!0,{},a.carrinho),ServicoCtrl._dadosServico.id=ServicoCtrl._dadosServico.gtin,ServicoCtrl._dadosServico.nome=ServicoCtrl._dadosServico.nome_servico,ServicoCtrl._dadosServico.foto_servico=ServicoCtrl._dadosServico.foto_principal,ServicoCtrl._dadosServico.urls.servico=ServicoCtrl._dadosServico.url,ServicoCtrl._dadosServico.categoria={nome:ServicoCtrl._dadosServico.categoria},ServicoCtrl._dadosServico.destino={nome:ServicoCtrl._dadosServico.destino},delete ServicoCtrl._dadosServico._token,delete ServicoCtrl._dadosServico.agenda_selecionada,delete ServicoCtrl._dadosServico.acompanhantes,delete ServicoCtrl._dadosServico.adicionais,t=$.extend(!0,{},a.carrinho.agenda_selecionada),e.find("[data-action='sendToCart']").html("Atualizar carrinho")),ServicoCtrl._payload={gtin:ServicoCtrl._dadosServico.id,uuid:ServicoCtrl._dadosServico.uuid,nome_servico:ServicoCtrl._dadosServico.nome,integracao:ServicoCtrl._dadosServico.integracao,foto_principal:ServicoCtrl._dadosServico.foto_servico,categoria:ServicoCtrl._dadosServico.categoria.nome,destino:ServicoCtrl._dadosServico.destino.nome,url:ServicoCtrl._dadosServico.urls.servico,cidade:ServicoCtrl._dadosServico.cidade,localizacao:ServicoCtrl._dadosServico.localizacao,horario:ServicoCtrl._dadosServico.horario,com_bloqueio:0,sem_bloqueio:0,valor_total:0,agenda_selecionada:{data_servico_id:r.data_servico_id,data:r.data,disponibilidade:r.disponibilidade,valor_venda:r.valor_venda,valor_venda_brl:r.valor_venda_brl,variacoes:r.variacoes}},null!==t&&(ServicoCtrl._payload.agenda_selecionada=t,ServicoCtrl._payload.com_bloqueio=parseInt(ServicoCtrl._dadosServico.com_bloqueio),ServicoCtrl._payload.sem_bloqueio=parseInt(ServicoCtrl._dadosServico.sem_bloqueio),ServicoCtrl._payload.valor_total=parseFloat(ServicoCtrl._dadosServico.valor_total),c=window.Helpers.dataToIE(t.data)),new Datepickk({container:n[0],maxSelections:1,minDate:i.date,maxDate:ServicoCtrl._events[ServicoCtrl._events.length-1].date,startDate:c,inline:!0,today:!1,tooltips:ServicoCtrl._events,onSelect:function(a){a&&ServicoCtrl.onChangeCalendarDate(this)}}).selectDate(c),ServicoCtrl.updateListOptions();var l=window.Helpers.formataValor(ServicoCtrl._payload.valor_total,2);e.find("p#total-modal").html("R$ ".concat(l)),e.find("p#total-modal-mobile").html("R$ ".concat(l)),ServicoCtrl.openModalComprar()}else ServicoCtrl.loaderDatas.show("Ops!<br>Para a compra deste produto,<br>Fale com uma de nossas atendentes.",!0)}),i.fail(function(){ServicoCtrl.loaderDatas.show("Não foi possível recuperar as <br> informações do serviço. Tente novamente!",!0)})})},prepareDatesForCalendar:function(a){for(var o=a.length,e=[],t=0;t<o;t++){var n=a[t];e.push({date:window.Helpers.dataToIE(n.date),text:n.text})}ServicoCtrl._events=e},updateListOptions:function(){for(var a="",o=ServicoCtrl._payload.agenda_selecionada.variacoes,e=o.length,t=0;t<e;t++){var n=o[t],i=o[t].quantidade||0;a+='\n                <div class="d-flex align-items-center justify-content-between item-age pb-4">\n                    <div class="text-truncate">\n                        <p class="m-0 font-weight-medium h5" style="white-space: normal;">{{ variacao }}</p>\n                        <span class="text-muted" style="white-space: normal;">{{ descricao }}</span>\n                        <span class="option-price">R$ {{ valor }}</span>\n                    </div>\n                    <div class="amount-age">\n                        <button data-variacao="{{ variacao_id }}" data-index="{{ index }}" data-remove class="btn btn-rounded" title="Remover">\n                            <i class="iconify" data-icon="jam:minus"></i>\n                        </button>\n                        <strong data-variacao="{{ variacao_id }}" data-quantidade>{{ quantidade }}</strong>\n                        <button data-variacao="{{ variacao_id }}" data-index="{{ index }}" data-add class="btn btn-rounded" title="Adicionar">\n                            <i class="iconify" data-icon="jam:plus"></i>\n                        </button>\n                    </div>\n                </div>\n        '.replace(/{{ variacao }}/g,n.variacao).replace(/{{ descricao }}/g,n.descricao).replace(/{{ valor }}/g,n.valor_venda_brl).replace(/{{ variacao_id }}/g,n.variacao_id).replace(/{{ quantidade }}/g,i).replace(/{{ index }}/g,t)}$("div.list-variacoes").html(a)},onClickAddPessoa:function(){$(document).on("click","button[data-add]",function(a){a.preventDefault();var o=$(a.currentTarget),e=o.attr("data-variacao"),t=o.attr("data-index"),n=parseInt(ServicoCtrl._payload.agenda_selecionada.disponibilidade),i=ServicoCtrl._payload.agenda_selecionada.variacoes[t],r=parseInt(ServicoCtrl._payload.com_bloqueio),c=parseInt(ServicoCtrl._payload.sem_bloqueio);"string"==typeof i.valor_total&&(ServicoCtrl._payload.agenda_selecionada.variacoes[t].valor_total=parseFloat(ServicoCtrl._payload.agenda_selecionada.variacoes[t].valor_total),ServicoCtrl._payload.agenda_selecionada.variacoes[t].valor_venda=parseFloat(ServicoCtrl._payload.agenda_selecionada.variacoes[t].valor_venda));var l=parseFloat(ServicoCtrl._payload.valor_total);if("SIM"===i.bloqueio){if(!(r<n))return ServicoCtrl._avisoModal.find("p").html("Só há ".concat(n," lugares disponíveis nesta data!")),void ServicoCtrl._avisoModal.removeClass("d-none");void 0===ServicoCtrl._payload.agenda_selecionada.variacoes[t].quantidade?(ServicoCtrl._payload.agenda_selecionada.variacoes[t].quantidade=1,ServicoCtrl._payload.agenda_selecionada.variacoes[t].valor_total=parseFloat(i.valor_venda)):(ServicoCtrl._payload.agenda_selecionada.variacoes[t].quantidade++,ServicoCtrl._payload.agenda_selecionada.variacoes[t].valor_total+=parseFloat(i.valor_venda)),ServicoCtrl._payload.com_bloqueio=r+1,ServicoCtrl._payload.valor_total=l+parseFloat(i.valor_venda),ServicoCtrl._avisoModal.addClass("d-none")}else{if(!(c<5))return ServicoCtrl._avisoModal.find("p").html("O limite para ".concat(i.variacao.toLowerCase()," é de 5 lugares!")),void ServicoCtrl._avisoModal.removeClass("d-none");void 0===ServicoCtrl._payload.agenda_selecionada.variacoes[t].quantidade?(ServicoCtrl._payload.agenda_selecionada.variacoes[t].quantidade=1,ServicoCtrl._payload.agenda_selecionada.variacoes[t].valor_total=parseFloat(i.valor_venda)):(ServicoCtrl._payload.agenda_selecionada.variacoes[t].quantidade++,ServicoCtrl._payload.agenda_selecionada.variacoes[t].valor_total+=parseFloat(i.valor_venda)),ServicoCtrl._payload.sem_bloqueio=c+1,ServicoCtrl._payload.valor_total=l+parseFloat(i.valor_venda),ServicoCtrl._avisoModal.addClass("d-none")}ServicoCtrl.updateQuantidadeOpcaoHtml(e,ServicoCtrl._payload.agenda_selecionada.variacoes[t].quantidade)})},updateQuantidadeOpcaoHtml:function(a,o){var e=window.Helpers.formataValor(ServicoCtrl._payload.valor_total,2);$("strong[data-variacao='"+a+"']").html(o),$("#comprar p#total-modal").html("R$ ".concat(e)),$("#comprar p#total-modal-mobile").html("R$ ".concat(e))},onClickRemoverPessoa:function(){$(document).on("click","button[data-remove]",function(a){a.preventDefault();var o=$(a.currentTarget),e=o.attr("data-variacao"),t=o.attr("data-index"),n=ServicoCtrl._payload.agenda_selecionada.variacoes[t],i=parseInt(ServicoCtrl._payload.com_bloqueio),r=parseInt(ServicoCtrl._payload.sem_bloqueio);"string"==typeof n.valor_total&&(ServicoCtrl._payload.agenda_selecionada.variacoes[t].valor_total=parseFloat(ServicoCtrl._payload.agenda_selecionada.variacoes[t].valor_total),ServicoCtrl._payload.agenda_selecionada.variacoes[t].valor_venda=parseFloat(ServicoCtrl._payload.agenda_selecionada.variacoes[t].valor_venda));var c=parseFloat(ServicoCtrl._payload.valor_total);void 0!==n.quantidade&&(ServicoCtrl._avisoModal.addClass("d-none"),n.quantidade>0&&(ServicoCtrl._payload.agenda_selecionada.variacoes[t].quantidade--,ServicoCtrl._payload.agenda_selecionada.variacoes[t].valor_total-=parseFloat(n.valor_venda),"SIM"===n.bloqueio?ServicoCtrl._payload.com_bloqueio=i-1:ServicoCtrl._payload.sem_bloqueio=r-1,ServicoCtrl._payload.valor_total=c-parseFloat(n.valor_venda),ServicoCtrl.updateQuantidadeOpcaoHtml(e,ServicoCtrl._payload.agenda_selecionada.variacoes[t].quantidade)))})},onChangeCalendarDate:function(a){ServicoCtrl._avisoModal.addClass("d-none");var o=a.getFullYear()+"-"+("0"+(a.getMonth()+1)).substr(-2)+"-"+("0"+a.getDate()).substr(-2);if(o===ServicoCtrl._payload.agenda_selecionada.data)return!1;var e={};for(var t in ServicoCtrl._agenda)if(ServicoCtrl._agenda.hasOwnProperty(t)&&ServicoCtrl._agenda[t].data===o){e=$.extend(!0,{},ServicoCtrl._agenda[t]);break}var n=ServicoCtrl._payload.agenda_selecionada;if(e.disponibilidade>=ServicoCtrl._payload.com_bloqueio){for(var i=n.variacoes,r=i.length,c=0,l=function(){var a=i[d],o=a.quantidade||0,t=e.variacoes.filter(function(o){return parseInt(o.variacao_id)===parseInt(a.variacao_id)}),n=(t=t[0]).valor_venda*parseInt(o);ServicoCtrl._payload.agenda_selecionada.variacoes[d].valor_total=n,ServicoCtrl._payload.agenda_selecionada.variacoes[d].valor_venda=t.valor_venda,ServicoCtrl._payload.agenda_selecionada.variacoes[d].valor_venda_brl=t.valor_venda_brl,c+=n},d=0;d<r;d++)l();ServicoCtrl._payload.valor_total=c,ServicoCtrl._payload.agenda_selecionada.data_servico_id=e.data_servico_id,ServicoCtrl._payload.agenda_selecionada.disponibilidade=e.disponibilidade,ServicoCtrl._payload.agenda_selecionada.valor_venda_brl=e.valor_venda_brl,ServicoCtrl._payload.agenda_selecionada.valor_venda=e.valor_venda,ServicoCtrl._payload.agenda_selecionada.data=e.data}else ServicoCtrl._avisoModal.find("p").html("Essa data possui somente ".concat(e.disponibilidade," lugares disponíveis!")),ServicoCtrl._avisoModal.removeClass("d-none"),ServicoCtrl._payload.com_bloqueio=0,ServicoCtrl._payload.sem_bloqueio=0,ServicoCtrl._payload.valor_total=0,ServicoCtrl._payload.agenda_selecionada=e;ServicoCtrl.updateListOptions();var s=window.Helpers.formataValor(ServicoCtrl._payload.valor_total,2);$("#comprar p#total-modal").html("R$ ".concat(s)),$("#comprar p#total-modal-mobile").html("R$ ".concat(s))},onClickButtonAdicionarCarrinho:function(){$("button[data-action='sendToCart']").on("click",function(a){if(a.preventDefault(),!(ServicoCtrl._payload.com_bloqueio>0&&ServicoCtrl._payload.valor_total>0))return ServicoCtrl._avisoModal.find("p").html("Informe uma quantidade para continuar..."),ServicoCtrl._avisoModal.removeClass("d-none"),!1;var o=0,e=0;if(ServicoCtrl._payload.agenda_selecionada.variacoes.forEach(function(a){o+=a.min_pax,e+=a.quantidade||0}),e<o)return ServicoCtrl._avisoModal.find("p").html("A quantidade mínima de pessoas para esse produto é ".concat(o,". Você selecionou ").concat(e,".")),ServicoCtrl._avisoModal.removeClass("d-none"),!1;ServicoCtrl._response&&ServicoCtrl._response.necessita_identificacao?ServicoCtrl.openModalAcompanhantes():ServicoCtrl._response&&ServicoCtrl._response.campos_adicionais.length>0?ServicoCtrl.openModalCamposAdicionais():ServicoCtrl.sendToCart(!0),setTimeout(function(){$("#whatsapp").hide()},200)})},openModalAcompanhantes:function(){var a=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],o=ServicoCtrl._payload.agenda_selecionada.variacoes,e=o.length,t="",n=0,i=$("#modal-acompanhantes");if(a){for(var r=0;r<e;r++)for(var c=o[r],l=0;l<c.quantidade;l++)t+='<div class="list-acompanhantes mb-2" data-acompanhante="'.concat(c.variacao_id,'">\n                            <h6 class="font-weight-medium h5">').concat(++n,"° Acompanhante - ").concat(c.variacao,'</h6>\n                            <div class="row">\n                                <div class="form-group nome_acompanhante col-sm-12 col-lg-4">\n                                    <label for="nome_').concat(n,'">Nome completo*</label>\n                                    <input type="text" class="form-control" id="nome_').concat(n,'" name="acompanhantes[').concat(n,'][nome]" data-auto-capitalize data-nome-completo="true" required data-min="5" data-required placeholder="Nome e sobrenome" autocomplete="off" title="Nome completo" data-list="nomes_acom" data-callback="nome">\n                                    <div class="invalid-feedback"></div>\n                                </div>\n                                <div class="form-group doc_acompanhante col-sm-12 col-md-6 col-lg-4">\n                                    <label for="documento_').concat(n,'">N° do documento*</label>\n                                    <input type="text" class="form-control" id="documento_').concat(n,'" name="acompanhantes[').concat(n,'][documento]" required data-min="5" data-required placeholder="Número CPF ou RG" title="Documento" autocomplete="off" data-list="doc_acom" data-callback="documento">\n                                    <div class="invalid-feedback"></div>\n                                </div>\n                                <div class="form-group nasc_acompanhante col-sm-12 col-md-6 col-lg-4">\n                                    <label for="nascimento_').concat(n,'">Nascimento*</label>\n                                    <input type="tel" class="form-control vanillaMask" id="nascimento_').concat(n,'" name="acompanhantes[').concat(n,'][nascimento]" required data-min="9" data-required placeholder="DD/MM/AAAA" data-mask="date" title="Nascimento" autocomplete="off" maxlength="10" autocomplete="off" data-list="data_acom" data-callback="nascimento">\n                                    <div class="invalid-feedback"></div>\n                                    <input type="hidden" name="acompanhantes[').concat(n,'][variacao_servico_id]" value="').concat(c.variacao_id,'">\n                                </div>\n                            </div>\n                        </div>');i.find(".fields-input").html(t),window.Helpers.capitalizeInput(),window.Helpers.vanillaMask()}i.jqmodal(),ServicoCtrl.pushStateModal("acompanhantes")},openModalCamposAdicionais:function(){var a=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],o=ServicoCtrl._response.campos_adicionais,e=o.length,t="",n=$("#modal-campo-adicional");if(a){for(var i=0;i<e;i++){var r=o[i],c="",l="",d=0===i?"col-sm-12":"col-sm-12 col-md-6";"SIM"===r.obrigatorio&&(c="data-required required",l="*"),t+='<div class="form-group '.concat(d,'">\n                        <label for="adicional_').concat(r.id,'">').concat(r.campo).concat(l,'</label>\n                        <input type="text" class="form-control" id="adicional_').concat(r.id,'" name="adicionais[').concat(i,'][informacao]" data-min="1" ').concat(c,' placeholder="').concat(r.placeholder,'" title="').concat(r.campo,'">\n                        <span class="invalid-feedback"></span>\n                        <input type="hidden" name="adicionais[').concat(i,'][campo_adicional_servico_id]" value="').concat(r.id,'">\n                    </div>')}n.find(".fields-input").html(t)}ServicoCtrl._response.necessita_identificacao?n.find("span.text-btn").html("Acompanhantes"):n.find("span.text-btn").html("Ver datas"),n.jqmodal(),ServicoCtrl.pushStateModal("adicionais")},onSubmitFormPersons:function(){$("form#acompanhantes").on("submit",function(a){a.preventDefault();var o=$(a.currentTarget),e=$("#modal-acompanhantes .info-error");if(e.addClass("d-none"),window.App.validateForm(o)){window.Helpers.loaderInsideModal.show();var t=$.post(o.attr("action"),o.serialize());t.done(function(a){"object"===_typeof(a.acompanhantes)?(ServicoCtrl._payload.acompanhantes=a.acompanhantes,window.DadosFactory.saveDadosAcompanhantes(a.acompanhantes),ServicoCtrl._response.campos_adicionais.length>0?(window.Helpers.loaderInsideModal.hide(),ServicoCtrl.openModalCamposAdicionais()):ServicoCtrl.sendToCart()):(window.Helpers.loaderInsideModal.hide(),e.find("p").html("Não foi possível salvar os dados dos acompanhantes. Tente novamente!"),e.removeClass("d-none"))}),t.fail(function(){window.Helpers.loaderInsideModal.hide(),e.find("p").html("Não foi possível salvar os dados dos acompanhantes. Tente novamente!"),e.removeClass("d-none")})}})},onSubmitFormAdditional:function(){$("form#adicionais").on("submit",function(a){a.preventDefault();var o=$(a.currentTarget),e=$("#modal-campo-adicional .info-error");if(e.addClass("hide"),window.App.validateForm(o)){window.Helpers.loaderInsideModal.show();var t=$.post(o.attr("action"),o.serialize());t.done(function(a){"object"===_typeof(a.adicionais)?(ServicoCtrl._payload.adicionais=a.adicionais,ServicoCtrl.sendToCart()):(window.Helpers.loaderInsideModal.hide(),e.find("p").html("Não foi possível salvar os dados adicionais. Tente novamente!"),e.removeClass("d-none"))}),t.fail(function(){window.Helpers.loaderInsideModal.hide(),e.find("p").html("Não foi possível salvar os dados adicionais. Tente novamente!"),e.removeClass("d-none")})}})},sendToCart:function(a){ServicoCtrl._sendToCart=!0;var o=$.jqmodal.getCurrent().$elm,e=o.find(".info-error");e.addClass("d-none"),a&&($.jqmodal.close(),ServicoCtrl.loaderDatas.show("Adicionando ao carrinho...")),ServicoCtrl._payload._token=window.Helpers.getTokenLaravel();var t=$.post(ServicoCtrl._dadosServico.urls.carrinho,ServicoCtrl._payload);t.done(function(a){a.adicionar?(window.Google.sendAddToCard({id:ServicoCtrl._dadosServico.uuid,name:ServicoCtrl._dadosServico.nome,price:ServicoCtrl._dadosServico.valor_venda,category:"".concat(ServicoCtrl._dadosServico.categoria.nome," / ").concat(ServicoCtrl._dadosServico.destino.nome)}),window.Facebook.sendAddToCard(ServicoCtrl._dadosServico.uuid,ServicoCtrl._dadosServico.valor_venda),setTimeout(function(){window.location.href=a.route},200)):(window.Helpers.loaderInsideModal.hide(),o.jqmodal(),e.find("p").html("Não foi possível adicionar o seu serviço no carrinho. Tente novamente!"),e.removeClass("d-none"))}),t.fail(function(){window.Helpers.loaderInsideModal.hide(),o.jqmodal(),e.find("p").html("Não foi possível adicionar o seu serviço no carrinho. Tente novamente!"),e.removeClass("d-none")})},verMaisAvaliacao:function(){$(".btn-ver-mais").click(function(a){a.preventDefault();var o=a.target,e=o.getAttribute("key"),t=$("#avaliacao-resumo-".concat(e)),n=$("#avaliacao-completo-".concat(e));o=$("#ver-mais-avaliacao-".concat(e));var i=$("#ver-menos-avaliacao-".concat(e));o.css("display","none"),i.css("display","block"),t.css("display","none"),n.css("display","block")})},verMenosAvaliacao:function(){$(".btn-ver-menos").click(function(a){a.preventDefault();var o=a.target,e=o.getAttribute("key"),t=$("#avaliacao-resumo-".concat(e)),n=$("#avaliacao-completo-".concat(e));o=$("#ver-menos-avaliacao-".concat(e));var i=$("#ver-mais-avaliacao-".concat(e));o.css("display","none"),i.css("display","block"),t.css("display","block"),n.css("display","none")})},carregarMaisAvaliacoes:function(){$("#carregar-mais-avaliacoes").click(function(){var a=parseInt($("#avaliacao-qtd").text()),o=parseInt($("#avaliacao-qtd-mostrada").text()),e=$("#avaliacao-link").text();console.log("Quantidade máxima = ".concat(a," | Quantidade impressa = ").concat(o)),e+="?limite=".concat(o+2,"&inicial=").concat(o),(o+=2)>=a&&$("#carregar-mais-avaliacoes").css("display","none"),$("#avaliacao-qtd-mostrada").text(o),axios.get(e).then(function(a){var o=a.data.avaliacoes,e=$("#avaliacao-next-key");for(var t in o){var n=o[t],i="<div class='avaliacao-".concat(e.text(),"'>\n                                    <span><b>").concat(n.nome,"</b></span>\n                                    <br>\n                                    ").concat(ServicoCtrl.desenharEstrelas(n.nota),"\n                                    <br>");n.avaliacao.length<=280?i+="<p style='text-align: justify;'>".concat(n.avaliacao,"</p>"):i+="<p id='avaliacao-resumo-".concat(e.text(),"' style='text-align: justify; margin-bottom: 0px;'> ").concat(n.avaliacao.substr(0,280),"...</p>\n                                                 <p id='avaliacao-completo-").concat(e.text(),"' style='text-align: justify; display: none;'> ").concat(n.avaliacao," </p>\n                                                 <a id='ver-mais-avaliacao-").concat(e.text(),"' key='").concat(e.text(),"' class='btn-ver-mais' href='#'>Ver mais<a/>\n                                                 <a style='display: none;' id='ver-menos-avaliacao-").concat(e.text(),"' key='").concat(e.text(),"' class='btn-ver-menos' href='#'>Ver menos<a/>"),i+="<p>".concat(n.data,"</p>"),$("#section-avaliacoes").append(i),ServicoCtrl.verMaisAvaliacao(),ServicoCtrl.verMenosAvaliacao(),e.text(parseInt(e.text())+1)}})})},desenharEstrelas:function(a){for(var o=$("#avaliacao-star").text(),e="",t=1;t<=5;t++)t<=a&&(e+="<img id='star1' style='padding:5px;' src='".concat(o,"'>"));return e}};
